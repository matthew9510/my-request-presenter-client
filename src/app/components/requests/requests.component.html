<ng-container *transloco="let t; read: 'requests'">
  <div *ngIf="eventStatus !== 'active'; else activeEvent">
    <p class="body-text">This event has not started yet. Check back later.</p>
  </div>
  <ng-template #activeEvent>
    <div [class.largeScreenDisplay]="isLargeScreen">
      <div *ngIf="currentlyPlaying; else selectNextSong" class="sticky" [class.largeScreenChild]="isLargeScreen">
        <mat-card class="mat-elevation-z0 outline" [class.cardSmallScreen]="isSmallScreen" [class.cardLargeScreen]="isLargeScreen">
          <mat-card-title>{{ t('now playing') }}</mat-card-title>
          <mat-card-subtitle class="now-playing-subtitle">{{ nowPlayingRequest.song }} {{ t('by') }} {{ nowPlayingRequest.artist }}</mat-card-subtitle>
          <!-- <mat-card-content>{{ nowPlayingRequest.amount | currency }}</mat-card-content>  -->
        </mat-card>
    </div>
      <ng-template #selectNextSong>
        <div>
          <!-- {{ t('no current song playing message') }} -->
        </div>
      </ng-template>

      <h3 [class.largeScreenChild]="isLargeScreen" class="request-subheader" mat-subheader>{{ t('up next') }}</h3>
      <mat-list [class.largeScreenChild]="isLargeScreen">
        <!-- message displays when there are no requests for the event -->
        <div class="no-requests-message" *ngIf="noRequestsMessage">{{ t('no requests yet message') }}</div>
        
        <app-request-details mat-list-item 
          [song]="request.song" 
          [artist]="request.artist" 
          [amount]="request.amount"
          [status]="request.status" 
          *ngFor="let request of acceptedRequests; index as i">

          <button topUpButton mat-icon-button class="request-button" color="primary" (click)="openDialog(t('top up dialog title'), request.id, request.song, request.artist)">
            <mat-icon>add_circle</mat-icon>
          </button>
        </app-request-details>
      </mat-list>
    </div>

    <div id="fab-button-wrapper">
      <div id="fab-button">
        <button class="extended-fab-button" mat-fab color="primary" (click)="openDialog(t('new request dialog title'))">
          <mat-icon>add</mat-icon>
          <span class="fab-button-text"> {{ t('make request fab') }}</span>
        </button>
      </div>
    </div>
  </ng-template>
</ng-container>